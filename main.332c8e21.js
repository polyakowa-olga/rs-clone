(()=>{"use strict";const e=class{constructor(e,t){this.container=document.createElement(e),this.classes=t,this.container.classList.add(...this.classes)}returnHTML(){return this.container}},t='<div class="rul-game">\n<div class="about-game">\n    <div class="name-about-game">\n        <h1>The Capitalist\n            <span>build your monopoly<span>\n        </h1>\n        <p class="text-about-game">The Capitalist is a economic strategy based on the market model of financial\n            corporations. Modern remake of the game that has conquered the hearts of millions of players\n            around\n            the world and entered into history as Monopoly.</p>\n        <p class="text-about-game">\n            The goal of the game is to maximize your starting capital and to ruin other players by\n            buying up\n            assets or getting them through deals concluded with your competitors, through smart\n            combinations, or\n            by winning the auctions. Only one player wins - the capitalist who stayed afloat, managed to\n            make\n            the largest fortune and ruined all his rivals. </p>\n        <p class="text-about-game">This game will bring you a lot of pleasure with its unpredictability,\n            intrigue, excitement\n            and\n            diversity, because each game here is a unique story and the opportunity to spend time in a\n            great\n            company! Playing this game you develop your business thinking, the ability to reach\n            agreements and\n            think through business combinations, the ability to accept big money and distribute them\n            efficiently. </p>\n        <p class="text-about-game">The dynamics of the game and its duration is unpredictable and depends on the\n            number of\n            players and\n            their personalities. Some, playing monopoly, fighting to the end, even if at first glance\n            the\n            situation seems hopeless, others, on the contrary, give up as soon as they feel that the\n            game is not\n            in their favor, although in most cases this is a misconception, because in online monopoly,\n            as in\n            the classic board game, a gameplay advantage can radically change up to several times for a\n            game.\n        </p>\n        <p class="text-about-game">Now you can fully immerse yourself in the atmosphere of world business,\n            become a successful\n            capitalist and fight your rivals to the victorious end! </p>\n    </div>\n</div>\n<div class="game-rules">\n    <div class="block-game-rules">\n        <h2>How to play\n            <span>game rules and basic principles<span>\n        </h2>\n        <p class="text-about-game">From 2 to 5 players inclusive can take part in one game. The winner is the\n            last\n            player who has not gone bankrupt. In case the last remaining two players failed to ruin each other\n            within two hours, the winner is the player whose total capital is greater (total value of all assets\n            and\n            cash).</p>\n    </div>\n    <div class="block-game-rules">\n        <h3>Start of Play</h3>\n        <p class="text-about-game">\n            At the beginning of the game each player is provided with a start-up capital of $1,500. The chips of\n            all players are automatically placed on the starting field. </p>\n        <p class="text-about-game">\n            The right of the first turn is determined automatically, using a random number generator. The player\n            has no more than 2 minutes for each turn. A player who fails to complete his turn within the\n            allotted time is automatically declared bankrupt and retired from the game.\n        </p>\n        <p class="text-about-game">\n            Players take turns rolling a pair of dice, in the order of places they occupy the gaming table. The\n            player\'s chip moves clockwise by the number of fields corresponding to the sum of numbers obtained\n            on the dice as a result of the roll.\n        </p>\n    </div>\n    <div class="block-game-rules">\n        <h3>Asset Purchases</h3>\n        <p class="text-about-game">\n            If the dice roll brings you into the field of a company that is not yet owned by anyone, you are\n            entitled to buy this asset for the price indicated in this field. You can get information about the\n            profitability of the company by clicking on this field.\n        </p>\n        <p class="text-about-game">\n            When you do not have enough \'cash\' for it or at the moment you do not want to spend it, you can\n            borrow from a virtual bank to buy desirable asset (a chargeable service). You can only take a single\n            credit at a time and get a new one by repaying the current one.\n        </p>\n        <p class="text-about-game">\n            If you decide not to buy the asset, it must be auctioned off. The other players take turns bidding\n            at the auction, or refuse to bid. The auction step is $10,000. The highest bidder becomes the owner\n            of the asset.\n        </p>\n        <p class="text-about-game">\n            When you become the owner of an asset, you begin to receive dividends every time your opponent hits\n            the field of this company. The opponent in this case is obliged to pay to the owner the amount\n            indicated on this field.\n        </p>\n    </div>\n    <div class="block-game-rules">\n        <h3>Asset Development</h3>\n        <p class="text-about-game">\n            Your goal is to develop your existing assets to generate more profit. For this purpose it is\n            necessary to take possession of all companies of one or several countries - in other words, to take\n            possession of the monopoly.\n        </p>\n        <p class="text-about-game">\n            By owning the monopoly, you can buy shares of your monopoly companies while making a turn, which\n            significantly increases the profitability of the company for you and causes more damage to your\n            opponents when they hit these fields. You can get information about the profitability of the company\n            depending on the number of available shares by pressing on its field.\n        </p>\n    </div>\n    <div class="block-game-rules">\n        <h3>Deals</h3>\n        <p class="text-about-game">\n            You can also take possession of the asset you need to build a monopoly by making deals with other\n            players: if another player already has the asset you need, you can offer him money and/or another\n            company in exchange.\n        </p>\n        <p class="text-about-game">\n            Remember that exchange combinations to get the desired company may consist of a chain of\n            transactions with several players, so it is better to negotiate a deal with your opponents in\n            advance, via personal messages or in a chat.\n        </p>\n        <p class="text-about-game">\n            Exchange combinations should be comparable in value: gifts, favours, loans are not allowed.\n        </p>\n    </div>\n    <div class="block-game-rules">\n        <h3>Payment of Dividends</h3>\n        <p class="text-about-game">\n            If as a result of a turn you enter the field of a company already owned by your opponent, you must\n            pay the owner the amount marked on this field.\n        </p>\n        <p class="text-about-game">\n            To pay off your debt, you can use both the money you already have and the money you can get from the\n            bank against the security of your companies or the sale of your shares, for which you will see the\n            corresponding interface buttons at the moment of debt payment.\n        </p>\n        <p class="text-about-game">\n            If the total capital of the player (the total value of all assets and cash) is insufficient to pay\n            off the debt, the player is declared bankrupt and leaves the game.\n        </p>\n    </div>\n    <div class="block-game-rules">\n        <h3>Bonus Fields</h3>\n        <p class="text-about-game">\n            On the game board there are two bonus fields called Chance, getting on which you can get an\n            unplanned profit. The amount of bonuses varies and depends only on your luck.\n        </p>\n        <p class="text-about-game">\n            In addition, each time you complete a full round of play and pass through the starting field, you\n            get an unconditional income of $200.\n        </p>\n    </div>\n    <div class="block-game-rules">\n        <h3>Penalty Fields</h3>\n        <p class="text-about-game">\n            On the game board there are two penalty fields called Force Majeure, hitting which you incur losses,\n            the size of which can also be different.\n        </p>\n        <p class="text-about-game">\n            Tax. Once here, you will have to pay taxes of 6% of all your capital (total value of all assets and\n            cash).\n        </p>\n        <p class="text-about-game">\n            Customs Clearance. Your chip moves into the Customs field and gets arrested. You will have to pay a\n            fine of $50 for leaving this field or roll a double on dice in one of three attempts. A direct\n            hit on the Customs field will not result in any penalties.\n        </p>\n    </div>\n</div>\n</div>',a=class{static createBlockRules(){const e=document.createElement("div"),a=document.createElement("div"),n=document.createElement("button"),r=document.createElement("button");return e.append(a),a.innerHTML=t,a.prepend(n),a.prepend(r),e.classList.add("rules-game-shadow"),a.classList.add("rules-game"),n.classList.add("button-language"),r.classList.add("button-delete"),n.innerText="Ru",n.classList.add("en"),n.addEventListener("click",(()=>{n.classList.contains("en")?(a.innerHTML='<div class="rul-game">\n<div class="about-game">\n    <div class="name-about-game">\n        <h1>The Capitalist\n            <span>построй свою монополию онлайн<span>\n        </h1>\n        <p class="text-about-game">The Capitalist — это экономическая стратегия,\n            основанная на рыночной модели финансовых корпораций. Современный ремейк игры, завоевавшей сердца\n            миллионов игроков во всем мире и вошедшей в историю как Монополия.</p>\n        <p class="text-about-game">\n            Цель игры — максимально приумножить свой стартовый капитал и разорить других игроков, скупая активы\n            или получая их в результате сделок, заключенных с вашими соперниками и хитроумных комбинаций, и даже\n            побеждая на аукционных торгах. Выиграет лишь один — капиталист, оставшийся на плаву, сумевший\n            сколотить наибольшее состояние и разоривший всех своих соперников. </p>\n        <p class="text-about-game">Эта игра принесет вам массу удовольствия своей непредсказуемостью, интригой,\n            азартом и разнообразием, ведь каждая партия в монополию — это уникальная история и возможность\n            провести время в хорошей компании! Играя в эту игру вы развиваете свое бизнес-мышление, умение\n            договариваться и продумывать бизнес-комбинации, способность принять большие деньги и рационально\n            распределять их.</p>\n        <p class="text-about-game">Динамика игры и ее длительность непредсказуема и зависит от количества\n            участников и от их характера. Одни, играя в монополию, борются до конца, даже если на первый взгляд\n            ситуация кажется безнадежной, другие наоборот сдаются, как только почувствовали, что игра\n            складывается не в их пользу, хотя в большинстве случаев это заблуждение, ведь в онлайн монополии,\n            как и в классической настольной, игровое преимущество может кардинально меняться до нескольких раз\n            за партию.\n        </p>\n        <p class="text-about-game">Теперь вы можете полностью погрузиться в атмосферу мирового бизнеса, стать\n            успешным капиталистом и вести здоровую борьбу со своими соперниками до победного конца! </p>\n    </div>\n</div>\n<div class="game-rules">\n    <div class="block-game-rules">\n        <h2>Как играть\n            <span>Правила и основные принципы игры<span>\n        </h2>\n        <p class="text-about-game">В одной партии могут принимать участие от 2 до 5 игроков включительно.\n            Победителем признается последний необанкротившийся игрок. В случае, если последние оставшиеся два\n            игрока не смогли разорить друг друга в течение двух часов, победителем признается тот игрок, чей\n            суммарный капитал больше (общая стоимость всех активов и наличных денег).</p>\n    </div>\n    <div class="block-game-rules">\n        <h3>Начало игры</h3>\n        <p class="text-about-game">В начале партии каждому игроку предоставляется стартовый капитал в размере $1\n            500 000. Фишки всех участников игры автоматически располагаются на стартовом поле.</p>\n        <p class="text-about-game">Право первого хода определяется автоматически, при помощи генератора\n            случайных чисел. На каждый ход игроку отводится не более 2 минут. Игрок не сумевший завершить свой\n            ход в отведенное время автоматически признается банкротом и выбывает из партии.\n        </p>\n        <p class="text-about-game">Игроки по очереди бросают кубики, в порядке мест, занятых ими на игровом\n            столе. Фишка игрока перемещается по часовой стрелке на количество полей, соответствующее сумме\n            чисел, полученных на кубиках в результате броска.\n        </p>\n    </div>\n    <div class="block-game-rules">\n        <h3>Покупка активов</h3>\n        <p class="text-about-game">\n            Если в результате броска кубиков вы попадаете на поле компании, которая еще никому не принадлежит,\n            вы в праве купить этот актив по цене, обозначенной на данном поле. Получить информацию о\n            прибыльности компании можно нажав на данное поле.\n        </p>\n        <p class="text-about-game">Если вам не хватает «наличных средств» на покупку желаемого актива, или в\n            данный момент вы не желаете их тратить – вы можете воспользоваться кредитной линией (платная услуга)\n            и взять в виртуальном банке кредит на покупку компании. Кредит должен быть возвращен в банк в\n            течение следующих 16 ходов. Единовременно можно взять лишь один кредит, а новый можно получить лишь\n            погасив текущий.\n        </p>\n        <p class="text-about-game">Если вы решаете не покупать актив, то он должен быть выставлен на аукционные\n            торги. Остальные игроки по очереди делают ставки на аукционе в том же порядке в котором делают ходы,\n            либо отказываются от участия в торгах. Шаг аукциона $10 000. Владельцем актива становится игрок,\n            предложивший наибольшую цену.\n        </p>\n        <p class="text-about-game">Став владельцем актива, вы начинаете получать дивиденды при каждом попадании\n            соперника на поле данной компании. Сперник в этом случае обязан выплатить владельцу сумму,\n            обозначенную на данном поле.\n        </p>\n    </div>\n    <div class="block-game-rules">\n        <h3>Развитие активов</h3>\n        <p class="text-about-game">Ваша задача — развивать имеющиеся активы, для получения большей прибыли. Для\n            этого необходимо завладеть всеми компаниями одной или нескольких стран — иными словами, завладеть\n            монополией.\n        </p>\n        <p class="text-about-game">Владея монополией, вы можете докупать акции своих компаний, входящих в\n            монополию, во время совершения хода, что значительно увеличивает прибыльность компании для вас и\n            наносит больший урон вашим соперникам при попадании на данные поля. Получить информацию о\n            прибыльности компании в зависимости от количества имеющихся акций можно нажав на ее поле.\n        </p>\n    </div>\n    <div class="block-game-rules">\n        <h3>Сделки</h3>\n        <p class="text-about-game">Завладеть активом, нужным вам для построения монополии, можно также в\n            результате заключения сделок с другими игроками: если другой игрок уже владеет нужным вам активом,\n            вы можете предложить ему в обмен деньги и/или другую компанию.\n        </p>\n        <p class="text-about-game">Помните, что комбинации обмена для получения желаемой компании могут состоять\n            из целой цепочки сделок с несколькими игроками, поэтому о заключении сделки с соперниками лучше\n            договариваться заранее, в личных сообщениях или в чате.\n        </p>\n        <p class="text-about-game">\n            Комбинации обмена должны быть сопоставимыми по своей ценности: дарение, одолжения, займы не\n            разрешаются.\n        </p>\n    </div>\n    <div class="block-game-rules">\n        <h3>Выплаты дивидендов</h3>\n        <p class="text-about-game">\n            Если в результате хода вы попадаете на поле компании уже принадлежащей вашему сопернику, вы обязаны\n            выплатить владельцу сумму, обозначенную на данном поле.\n        </p>\n        <p class="text-about-game">Для выплаты долга, вы можете использовать как уже имеющиеся у вас деньги, так\n            и деньги, которые вы можете получить у банка под залог ваших компаний или продажи ваших акций, для\n            чего в момент выплаты долга вы увидите соответствующие кнопки интерфейса.\n        </p>\n        <p class="text-about-game">\n            В случае если всего капитала игрока (общая стоимость всех активов и наличных денег) недостаточно для\n            погашения долга, он признается банкротом и выходит из игры.\n        </p>\n    </div>\n    <div class="block-game-rules">\n        <h3>Призовые поля</h3>\n        <p class="text-about-game">На игровой доске присутствуют два призовых поля Шанс, попадая на которые вы\n            можете получить незапланированную прибыль. Размер призовых выплат варьируется и зависит только от\n            вашего везения.\n        </p>\n        <p class="text-about-game">Кроме того, каждый раз завершив полный игровой круг и проходя через стартовое\n            поле, каждый игрок получает безусловный доход в размере $200.\n        </p>\n    </div>\n    <div class="block-game-rules">\n        <h3>Штрафные поля</h3>\n        <p class="text-about-game">На игровой доске присутствуют два штрафных поля Форс Мажор, попадая на\n            которые вы несете убытки, размер которых также может быть различным.\n        </p>\n        <p class="text-about-game">Налог. Попадая сюда, вам придется заплатить налоги в размере 6% от всего\n            вашего капитала (общая стоимость всех активов и наличных денег).\n        </p>\n        <p class="text-about-game">Поле Таможенная Очистка. Ваша фишка перемещается на поле Таможня и попадает\n            под арест. За выход с этого поля придется заплатить штраф в размере $50 либо выбросить дубль на\n            кубиках в одной из трех попыток. Прямое попадание на поле Таможня не влечет никаких штрафов.\n        </p>\n    </div>\n</div>\n</div>',a.prepend(n),n.classList.add("ru"),n.classList.remove("en"),n.innerText="En",a.prepend(r),r.classList.add("button-delete")):n.classList.contains("ru")&&(a.innerHTML=t,a.prepend(n),n.classList.add("en"),n.classList.remove("ru"),n.innerText="Ru",a.prepend(r),r.classList.add("button-delete"))})),r.addEventListener("click",(()=>{e.remove()})),e}};var n;!function(e){e.StartPage="Start Page",e.GamePage="Game Page"}(n||(n={}));const r=[{id:"start-page",content:n.StartPage},{id:"game-page",content:n.GamePage}],s=class extends e{constructor(e,t){super(e,t)}createPageButtons(){const e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div"),s=document.createElement("img");return e.classList.add("page-button-box"),r.forEach((t=>{if("start-page"!==t.id&&"game-page"!==t.id){const a=document.createElement("a");a.href=`#${t.id}`,a.innerText=t.content,a.classList.add("button",`#${t.id}-button`),e.append(a)}})),e.append(t),e.append(n),t.append(s),t.classList.add("block-button-sound"),n.classList.add("button-rules"),s.classList.add("button-sound"),s.classList.toggle("active"),n.innerText="Rules",s.src="../assets/img/SoundOn.jpg",s.addEventListener("click",(()=>{s.classList.toggle("active")})),n.addEventListener("click",(()=>{const t=document.querySelector(".rules-game");t&&t.remove();const n=a.createBlockRules();e.append(n)})),e}createLogo(){const e=document.createElement("div");return e.className="header-logo",e.textContent="MONOPOLY",e}returnHTML(){return this.container.append(this.createLogo()),this.container.append(this.createPageButtons()),this.container}},o=class extends e{constructor(e,t){super(e,t)}returnHTML(){return this.container.innerHTML='\n\n        <div class="year">2023</div>\n        <a class="link" href="https://github.com/KOSHAK2008">\n          <img class="icon github-icon" src="../assets/icons/github-icon.svg" alt="github_ico">\n        </a>\n        <a class="link" href="https://github.com/polyakowa-olga">\n          <img class="icon github-icon" src="../assets/icons/github-icon.svg" alt="github_ico">\n        </a>\n        <a class="link" href="https://github.com/imnephy">\n          <img class="icon github-icon" src="../assets/icons/github-icon.svg" alt="github_ico">\n        </a>\n        <a class="link" href="https://rs.school/js/">\n          <img class="icon RSS-icon" src="../assets/icons/rs-school-js.svg" alt="RSS_ico">\n        </a>\n        ',this.container}},i=class{constructor(e){this.container=document.createElement("main"),this.container.classList.add("main"),this.container.id=e}returnHTML(){return this.container}},c=class extends i{constructor(e){super(e)}createPageButton(){const e=document.createElement("a");return e.href=`#${r[1].id}`,e.innerText="START GAME",e.classList.add("button",`${r[1].id}-button`),e}returnHTML(){const e=this.createPageButton();return this.container.append(e),this.container}};class l{constructor(e){this.buttonSound=e}static Coins(){if(document.querySelector(".active")){const e=new Audio;e.src="../assets/audio/Coins.mp3",e.autoplay=!0}}static Dice(){if(document.querySelector(".active")){const e=new Audio;e.src="../assets/audio/DiceMy.mp3",e.autoplay=!0}}static chipShuffle(){if(document.querySelector(".active")){const e=new Audio;e.src="../assets/audio/chipShuffle.mp3",e.autoplay=!0}}static StartGame(){if(document.querySelector(".active")){const e=new Audio;e.src="../assets/audio/gong.mp3",e.autoplay=!0}}static Incoming(){if(document.querySelector(".active")){const e=new Audio;e.src="../assets/audio/incoming.mp3",e.autoplay=!0}}static OutComing(){if(document.querySelector(".active")){const e=new Audio;e.src="../assets/audio/outcoming.mp3",e.autoplay=!0}}static BuyCard(){if(document.querySelector(".active")){const e=new Audio;e.src="../assets/audio/pm.mp3",e.autoplay=!0}}static AdminSound(){if(document.querySelector(".active")){const e=new Audio;e.src="../assets/audio/admin_sound.mp3",e.autoplay=!0}}static DropCoins(){if(document.querySelector(".active")){const e=new Audio;e.src="../assets/audio/piecesDrop.mp3",e.autoplay=!0}}static OpenTrade(){if(document.querySelector(".active")){const e=new Audio;e.src="../assets/audio/Step.mp3",e.autoplay=!0}}static TradeDoing(){if(document.querySelector(".active")){const e=new Audio;e.src="../assets/audio/Tada.mp3",e.autoplay=!0}}static AddMessage(){if(document.querySelector(".active")){const e=new Audio;e.src="../assets/audio/public_chat.mp3",e.autoplay=!0}}static PickUp(){if(document.querySelector(".active")){const e=new Audio;e.src="../assets/audio/piecesPickUp.mp3",e.autoplay=!0}}static ChanceorRelax(){if(document.querySelector(".active")){const e=new Audio;e.src="../assets/audio/ChanceorRelax.mp3",e.autoplay=!0}}static ForceorTax(){if(document.querySelector(".active")){const e=new Audio;e.src="../assets/audio/pole_letter_wrong.mp3",e.autoplay=!0}}static Bankrupt(){if(document.querySelector(".active")){const e=new Audio;e.src="../assets/audio/bankrupt.mp3",e.autoplay=!0}}static Win(){if(document.querySelector(".active")){const e=new Audio;e.src="../assets/audio/pobeda.mp3",e.autoplay=!0}}static endTurn(){if(document.querySelector(".active")){const e=new Audio;e.src="../assets/audio/vnezapnyiy_perehod.mp3",e.autoplay=!0}}static againTurn(){if(document.querySelector(".active")){const e=new Audio;e.src="../assets/audio/again_perehod.mp3",e.autoplay=!0}}}const d='    \n<div class="playerColor"></div>\n<div class="flag"></div>\n<div class="logo"></div>\n<div class="darker"></div>\n<div class="lock"></div>\n<div class="fieldPrice"></div>\n<div class="shares"></div>',u=[2,4,5,9,10,12,28,29,31,21,23,24],m=[14,15,16,18,19,33,34,35,37,38],p=[7,26],h=[3,30,11,22],y=[p,h].flat();[u,m,p,h].flat();const f=class extends e{constructor(e,t,a,n,r){super(e,t),this.player=a,this.cardData=n,this.messageInfo=r}createMessage(e,t){const a=this.messageInfo?this.messageInfo.text.replace(/Y/i,"y"):void 0;let n="";if(void 0!==e&&(null==e?void 0:e.length)>11)n=e;else if("turn"===e)n=`${this.player.name}'s turn now`;else if("pawnlock"===e)n=`${this.player.name} has pawned ${this.cardData.name}`;else if("return"===e)n=`${this.player.name} return ${this.cardData.name}`;else if("sold"===e)n=`Player ${this.player.id} doesn't have enough in cash.\n\n      You need to sold something...`;else if("pickshares"===e)n="You need to pick your field's w/o shares on it's country";else if("shares"===e)n="You need to pick your fields";else if("trade1"===e)n=`Player ${t} not found.`;else if("trade2"===e)n="Error! Choose correct amount of money";else if("trade3"===e)n="Error in tradeble props";else if("trade4"===e)n="The deal is done!";else if("trade5"===e)n="Offer was rejected.";else if("trade6"===e)n="You need to pick tradeble companies!";else if("trade7"===e)n="You need to pick companie's w/o shares in it's country";else if("lost"===e)n=`${this.player.name} lost $${t}`;else if("buy"==e)n=`${this.player.name} bought ${this.cardData.name}`;else if("nobuy"==e)n=`${this.player.name} don't have enough money to buy ${this.cardData.name}`;else if("get"==e)n=`${this.player.name} get $${t}`;else if("pay"==e)n=`${this.player.name} paid tax`;else if("have"==e)n=`player ${this.player.id} gets 200$ and now have ${t}`;else if("over"==e)n="GAME OVER";else if(6===this.cardData.id||25===this.cardData.id)n=`${this.player.name} ${a}`;else if(17===this.cardData.id||36===this.cardData.id)n=`${this.player.name} must pay tax`;else if(8===this.cardData.id||27===this.cardData.id)n=`${this.player.name} ${a}`;else if(13===this.cardData.id)n=`${this.player.name} moved to prison zone, nothing happend`;else if(1===this.cardData.id)n=`${this.player.name} moved to Start field and get a $200,000 profit`;else if(20===this.cardData.id)n=`${this.player.name} moved to Offshore field and can relax.`;else if(32===this.cardData.id)n=`${this.player.name} broke the law and ended up in jail`;else if("payto"===e&&null!==this.cardData.owner&&this.player.id!==this.cardData.owner.id){let e=this.cardData.value?this.cardData.value.tax:void 0;n=`${this.player.name} paid to ${this.cardData.owner.name} $${e}K`}else if(this.cardData.owner&&this.player.id===this.cardData.owner.id)n=`${this.player.name} moved to his own field`;else if(null!==this.cardData.owner&&this.player.id!==this.cardData.owner.id)if(this.cardData.lock)n=`${this.player.name} got on pawned field. Nothing happend`;else{let e=this.cardData.value?this.cardData.value.tax:void 0;n=`${this.player.name} moved to ${this.cardData.owner.name}'s field and must pay $${e}K`}else n=`${this.player.name} moved to ${this.cardData.name} field`;return n}returnHTML(e,t){const a=this.createMessage(e,t);return this.container.textContent=a,this.container}},v=class extends e{constructor(e,t,a){super(e,t),this.id=a}createRange(){const e=document.createElement("div");e.className="range-wrapper";const t=document.createElement("input");return t.id="range",t.type="range",e.append(t),e}createMessageWrapper(){const e=document.createElement("div");e.className="messages-wrapper";const t=document.createElement("div");return t.className="messages-box",t.textContent="Game started",e.append(t),e}returnHTML(){return this.container.append(this.createMessageWrapper()),this.container.id=this.id,this.container}},g=class extends e{constructor(e,t){super(e,t)}createSeparator(){return"- ||| -"}returnHTML(){const e=this.createSeparator();return this.container.textContent=e,this.container}},b=["chat-box"],w="chat-box",k=["chat-message"],x=new class{constructor(){this.chat=new v("div",b,w).returnHTML()}checkForChatExist(){return!!document.querySelector(`#${w}`)}run(e,t,a,n,r,s){if(this.checkForChatExist()){if(t&&a){const e=new g("div",["gap"]).returnHTML(),o=new f("span",k,t,a,n=n||void 0).returnHTML(r,s||void 0);setTimeout((()=>{const t=document.querySelector(".messages-box");t&&(t.append(o,e),t.scrollTop=t.scrollHeight)}),50)}}else e.append(this.chat)}},L=class extends e{constructor(e,t,a){super(e,t),this.choosedField=a}createBlock(){const{name:e,country:t,web:a,images:n,description:r}=this.choosedField,s=P.createElement(["i-name"],e),o=P.createElement(["i-country"],t),i=P.createElement(["i-web"],a,"a");a&&(i.href=a);const c=P.createContainer(["i-title"],[s,o,i]),l=P.createElement(["i-logo"]);l.style.backgroundImage=n?`url(${n})`:"";const d=P.createContainer(["i-title"],[l,c]),u=P.createElement(["i-text"],r),m=new DocumentFragment;return m.append(d,u),m}run(){return this.container.append(this.createBlock()),this.container}},E=class extends e{constructor(e,t,a){super(e,t),this.choosedField=a}createBlock(){const{name:e,description:t}=this.choosedField,a=P.createElement(["i-com-name"],e),n=P.createElement(["i-com-text"],t),r=new DocumentFragment;return r.append(a,n),r}run(){return this.container.append(this.createBlock()),this.container}},$=class extends e{constructor(e,t,a){super(e,t),this.choosedField=a}createBlock(){const{price:e,pledge:t,redemption:a,sharesPrice:n}=this.choosedField,r=P.createElement(["i-init-value-key"],"Initial price"),s=P.createElement(["i-init-value-value"],P.changeValueView(e)),o=P.createContainer(["i-init-value","value-container"],[r,s]),i=P.createElement(["i-deposit-value-key"],"Pledge price"),c=P.createElement(["i-deposit-value"],P.changeValueView(t)),l=P.createContainer(["i-deposit-value","value-container"],[i,c]),d=P.createElement(["i-redemption-value-key"],"Redemption value"),u=P.createElement(["i-redemption-value"],P.changeValueView(a)),m=P.createContainer(["i-redemption-value","value-container"],[d,u]),p=P.createElement(["i-share-value-key"],"Share value"),h=n?P.changeValueView(n):"not purchasable",y=P.createElement(["i-share-value"],h),f=P.createContainer(["i-share-value","value-container"],[p,y]),v=new DocumentFragment;return v.append(o,l,m,f),v}run(){return this.container.append(this.createBlock()),this.container}},T=["$10K x The sum on the dice","$25K x The sum on the dice"],C=class extends e{constructor(e,t,a){super(e,t),this.choosedField=a}createbaseYieldContainer(e){const t=P.createElement(["i-base-yield-key"],"Base"),a=P.createElement(["base-yield-value"],P.changeValueView(e));return P.createContainer(["i-base-yield-value","value-container"],[t,a])}createMonopolyYieldContainer(e){const t=P.createElement(["i-monopoly-yield-key"],"In a monopoly, without shares"),a=P.createElement(["monopoly-yield-value"],P.changeValueView(e));return P.createContainer(["i-monopoly-yield-value","value-container"],[t,a])}createSharesYield(e,t){const a=P.createElement(["shares-yield"]);if("South Korea"===e)for(let e=0;e<2;e++){const t=P.createElement(["share-yield","value-container"]),n=P.createElement(["shares-key"]);for(let t=0;t<e+1;t++){const e=P.createElement(["share-img"]);e.style.backgroundImage="url('../assets/img/share-korea.png')",n.append(e)}const r=P.createElement(["shares-value"],T[e]);t.append(n,r),a.append(t)}else for(let n=0;n<4;n++){const r=P.createElement(["share-yield","value-container"]),s=P.createElement(["shares-key"]);for(let t=0;t<n+1;t++){const t=P.createElement(["share-img"]);t.style.backgroundImage="China"===e?"url('../assets/img/share-chine.png')":"url('../assets/img/share.png')",s.append(t)}const o=P.createElement(["shares-value"],P.changeValueView(t[n]));r.append(s,o),a.append(r)}return a}createMaxYieldContainer(e){const t=P.createElement(["i-max-yield-key"]),a=P.createElement(["max-value-img"]);a.style.backgroundImage="url('../assets/img/golden_bar.png')",t.append(a);const n=P.createElement(["max-yield-value"],P.changeValueView(e[4]));return P.createContainer(["i-max-yield-value","value-container"],[t,n])}createBlock(){const{country:e,value:t}=this.choosedField,{tax:a,monopoly:n,shares:r}=t,s=P.createElement(["yield-title"],"COMPANY PROFITABILITY"),o="South Korea"===e||"China"===e?"":this.createbaseYieldContainer(a),i="South Korea"===e||"China"===e?"":this.createMonopolyYieldContainer(n);let c=e?this.createSharesYield(e,r):"";const l="South Korea"===e||"China"===e?"":this.createMaxYieldContainer(r),d=new DocumentFragment;return d.append(s,o,i,c,l),d}run(){return this.container.append(this.createBlock()),this.container}};class S extends e{constructor(e,t,a,n){super(e,t),this.id=a,this.choosedField=n}static createElement(e,t,a){const n=null!=a?a:"div",r=document.createElement(n);return r.classList.add(...e),r.textContent=t||"",r}static createContainer(e,t,a){const n=document.createElement("div");return n.classList.add(...e),a&&(n.id=a),t.forEach((e=>{n.append(e)})),n}static changeValueView(e){return`$${e}K`}createCrossBlock(){const e=S.createElement(["i-cross"]);return e.style.backgroundImage="url('../assets/icons/cross.png')",e}run(){if(this.container.prepend(this.createCrossBlock()),"common"===this.choosedField.type){const e=new E("div",["com-field-i-block"],this.choosedField).run();this.container.append(e)}else{const e=new L("div",["com-i-block"],this.choosedField).run(),t=new C("div",["yield-box"],this.choosedField).run(),a=new $("div",["right-part"],this.choosedField).run();a.append(t),this.container.append(e,a)}return this.container.id=this.id,this.container}}const P=S,B=["card-info-box"],M="card-info-box";class F{static changeFieldValue(e){e.forEach((e=>{var t;const a=document.querySelector(`#field${e.id}`),n=a.querySelector(".fieldPrice"),r=a.querySelector(".shares"),s=e.currValue?e.currValue:e.price;[7,26].includes(e.id)&&null!==e.owner?n.innerText=`🎲🎲X${s}`:n.innerText=`$${s}K`;const o=null===(t=e.value)||void 0===t?void 0:t.shares;if(o)switch(r.removeAttribute("class"),r.classList.add("shares"),e.currValue){case o[0]:u.includes(e.id)?r.classList.add("shares1"):m.includes(e.id)?r.classList.add("shares1v"):p.includes(e.id)?r.classList.add("sharesKO1"):h.includes(e.id)&&r.classList.add("sharesCHN1");break;case o[1]:u.includes(e.id)?r.classList.add("shares2"):m.includes(e.id)?r.classList.add("shares2v"):p.includes(e.id)?r.classList.add("sharesKO2"):h.includes(e.id)&&r.classList.add("sharesCHN2");break;case o[2]:u.includes(e.id)?r.classList.add("shares3"):m.includes(e.id)?r.classList.add("shares3v"):h.includes(e.id)&&r.classList.add("sharesCHN3");break;case o[3]:u.includes(e.id)?r.classList.add("shares4"):m.includes(e.id)?r.classList.add("shares4v"):h.includes(e.id)&&r.classList.add("sharesCHN4");break;case o[4]:u.includes(e.id)?r.classList.add("shares5"):m.includes(e.id)&&r.classList.add("shares5v")}}))}static refreshPlayerHTML(e){const t=document.querySelector(`#capital-${e.id}`),a=document.querySelector(`#money-${e.id}`);t.innerText=`${e.capital}`,a.innerText=`${e.money}`}static removePlayerHTML(e){const t=document.getElementById(`${e.id}`),a=document.querySelector(`#capital-${e.id}`),n=document.querySelector(`#money-${e.id}`);a.innerText="0",n.innerText="0",t.classList.add("bankruptPlayer")}static playerColorField(e,t){const a=document.querySelector(`#field${t.id}`).querySelector(".playerColor");a.className="",a.classList.add("playerColor",`color${e.id}`)}static winnerHtml(e){const t=document.querySelector("#game-page"),a=document.querySelector("#timer"),n=a.innerText;a.style.visibility="hidden",null==t||t.classList.add("end-game"),null==t||t.insertAdjacentHTML("afterbegin",'\n<div class="winner">\n<div class="winner__container">\n<p class="game-over__title">GAME OVER!</p>\n<p class="winner__title">WINNER!</p>\n<div class="winner__name"></div>\n<div class="winner__capital"></div>\n<div class="winner__time"></div>\n</div>\n</div>');const r=document.querySelector(".winner__name"),s=document.querySelector(".winner__capital"),o=document.querySelector(".winner__time");r.innerText=e.name,s.innerText=`Capital: ${e.capital}`,o.innerText=`time: ${n}`}static fullScreen(){const e=document.createElement("div"),t=document.createElement("div");e.append(t),t.classList.add("fullScreenBtn"),e.classList.add("fullScreenElem"),t.title="fullscreen mode";const a=document.querySelector("#game-page");t.addEventListener("click",(()=>{!function(){let e=document.querySelector("#game-page");t.classList.toggle("open-full-screen"),document.fullscreenElement?document.exitFullscreen():e.requestFullscreen().catch((e=>{alert(`Error attempting to enable fullscreen mode: ${e.message} (${e.name})`)}))}()})),a.append(e)}static timerHTML(e){const t=document.querySelector(".board");let a=document.querySelector("#timer");if(!a){const e=document.createElement("div");e.id="timer",a=e,t.append(e)}a.innerText=(e=>{let t,a,n;return t=Math.floor(e/3600),a=Math.floor(60*(e/3600-t)),n=Math.floor(e-3600*t-60*a),t=t>=10?`${t}`:`0${t}`,a=a>=10?`${a}`:`0${a}`,n=n>=10?`${n}`:`0${n}`,`${t}:${a}:${n}`})(e)}}const q={commonClass:"dice-side",indivClasses:["dice-front","dice-back","dice-left","dice-right","dice-top","dice-bottom"],imgSrc:['url("../assets/img/dice-1.png")','url("../assets/img/dice-2.png")','url("../assets/img/dice-3.png")','url("../assets/img/dice-4.png")','url("../assets/img/dice-5.png")','url("../assets/img/dice-6.png")']},D=class extends e{constructor(e,t,a){super(e,t),this.id=a}createDice(e){const t=document.createDocumentFragment();for(let a=0;a<q.indivClasses.length;a++){const n=q.indivClasses[a],r=document.createElement("div");r.classList.add(`${q.commonClass}`,`${n}`),r.id=`${this.id}${n.slice(4)}`,e&&(r.style.backgroundImage=q.imgSrc[e[a]-1]),t.append(r)}return t}returnHTML(e){return this.container.id=this.id,this.container.append(this.createDice(e)),this.container}},I=class extends e{constructor(e,t,a,n){super(e,t),this.diceOne=new D("div",["dice"],"dice-one"),this.diceTwo=new D("div",["dice"],"dice-two"),this.diceOneSidesSet=a,this.diceTwoSidesSet=n}returnHTML(){return this.container.append(this.diceOne.returnHTML(this.diceOneSidesSet),this.diceTwo.returnHTML(this.diceTwoSidesSet)),this.container}};const A=[{x:0,y:0,size:18.75,line:37.5,sizeStep:5e-4,lineStep:.5,frontTranslateZStep:.5,time1:-550,time2:-500,rotateXStep1:9,rotateYStep1:1.5,speedStep:1100},{x:0,y:0,size:18.75,line:37.5,sizeStep:5e-4,lineStep:.5,frontTranslateZStep:.5,time1:-550,time2:-500,rotateXStep1:8.5,rotateYStep1:4,speedStep:1e3}],H=[{diceId:"#dice-one",frontId:"#dice-one-front",backId:"#dice-one-back",leftId:"#dice-one-left",rightId:"#dice-one-right",topId:"#dice-one-top",bottomId:"#dice-one-bottom"},{diceId:"#dice-two",frontId:"#dice-two-front",backId:"#dice-two-back",leftId:"#dice-two-left",rightId:"#dice-two-right",topId:"#dice-two-top",bottomId:"#dice-two-bottom"}],Y=new class{throwDices(){const e=new class{throwDice(e,t){var a=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a}(t,[]);const{diceId:n,frontId:r,backId:s,leftId:o,rightId:i,topId:c,bottomId:l}=e,d=document.querySelector(n),u=document.querySelector(r),m=document.querySelector(s),p=document.querySelector(o),h=document.querySelector(i),y=document.querySelector(c),f=document.querySelector(l),v=requestAnimationFrame(g);function g(){return t=this,n=void 0,s=function*(){setTimeout((function t(){if(d.style.transform=`rotateX(${a.x-=a.rotateXStep1}deg) rotateY(${a.y+=a.rotateYStep1}deg)`,d.style.width=`${a.line+=a.lineStep}px`,d.style.height=`${a.line+=a.lineStep}px`,u.style.transform=`translateZ(${a.size+=a.frontTranslateZStep}px)`,m.style.transform=`rotateY(180deg) translateZ(${a.size+=a.sizeStep}px)`,p.style.transform=`rotateY(-90deg) translateZ(${a.size+=a.sizeStep}px)`,h.style.transform=`rotateY(90deg) translateZ(${a.size+=a.sizeStep}px)`,y.style.transform=`rotateX(90deg) translateZ(${a.size+=a.sizeStep}px)`,f.style.transform=`rotateX(-90deg) translateZ(${a.size+=a.sizeStep}px)`,a.x>a.time1&&setTimeout(t,10),a.x<a.time1){window.cancelAnimationFrame(v);const t=document.querySelector(`${e.bottomId}`);setTimeout((()=>{t.style.backgroundColor="#15ca42",setTimeout((()=>{t.style.backgroundColor="rgb(8, 51, 19)"}),70)}),1e3)}}),10)},new((r=void 0)||(r=Promise))((function(e,a){function o(e){try{c(s.next(e))}catch(e){a(e)}}function i(e){try{c(s.throw(e))}catch(e){a(e)}}function c(t){var a;t.done?e(t.value):(a=t.value,a instanceof r?a:new r((function(e){e(a)}))).then(o,i)}c((s=s.apply(t,n||[])).next())}));var t,n,r,s}g()}};e.throwDice(H[0],A[0]),e.throwDice(H[1],A[1])}run(e,t){const a=document.querySelector(".playerMainView"),n=new I("div",["dices-box"],e,t).returnHTML();a&&a.append(n),setTimeout((()=>{this.throwDices(),l.Dice()}),1e3),setTimeout((()=>n.remove()),3e3)}};class V{static createNumber(){V.cube1=Math.floor(Math.random()*(V.max-V.min))+V.min,V.cube2=Math.floor(Math.random()*(V.max-V.min))+V.min}static roll(){V.createNumber(),V.sum=V.cube1+V.cube2,V.isDouble=V.cube1===V.cube2,V.arrayNumbersOneBlock=V.arrayblock(V.cube1),V.arrayNumbersTwoBlock=V.arrayblock(V.cube2),Y.run(V.arrayNumbersOneBlock,V.arrayNumbersTwoBlock)}static arrayblock(e){return 6===e?[5,1,4,3,2,6]:5===e?[3,4,6,1,2,5]:4===e?[5,2,6,1,3,4]:3===e?[2,5,6,1,4,3]:2===e?[4,3,6,1,5,2]:1===e?[3,4,5,2,6,1]:void 0}}V.min=1,V.max=7;class O{static setCurrentValue(e,t){var a,n;const r=t.country,s=O.countryFields.get(r),o=G.cardsData.filter((e=>s.includes(e.id)));if(o.every((t=>t.owner===e)))"China"===r?o.map((e=>{var a;return e.currValue=null===(a=t.value)||void 0===a?void 0:a.shares[3]})):(null===(a=t.value)||void 0===a?void 0:a.shares.includes(t.currValue))||o.map((e=>{var t;return e.currValue=null===(t=e.value)||void 0===t?void 0:t.monopoly}));else if(t.owner===e)if("China"===r){const t=o.filter((t=>t.owner===e));t.map((e=>{var a;return e.currValue=null===(a=e.value)||void 0===a?void 0:a.shares[t.length-1]}))}else t.currValue=null===(n=t.value)||void 0===n?void 0:n.tax;else t.currValue,t.price;F.changeFieldValue(o)}}O.countryFields=new Map([["United Kingdom",[2,4,5]],["France",[9,10,12]],["Sweden",[14,15]],["Italy",[16,18,19]],["Japan",[21,23,24]],["South Korea",[7,26]],["Germany",[28,29,31]],["China",[3,30,11,22]],["Switzerland",[33,34]],["United States of America",[35,37,38]]]);class _{static remove(e){e.isBankrupt=!0,F.removePlayerHTML(e);const t=G.cardsData.filter((t=>t.owner===e));t.forEach((e=>{e.owner=null,e.currValue=e.price})),F.changeFieldValue(t),document.querySelectorAll(".playerColor").forEach((t=>t.classList.remove(`color${e.id}`))),document.querySelector(`.color_${e.id}`).style.visibility="hidden",_.checkEndGame()}static checkEndGame(){const e=G.players.filter((e=>!e.isBankrupt));1===e.length&&(l.Win(),x.run(G.boardFieldsContainer,void 0,G.cardsData[0],void 0,"over"),F.winnerHtml(e[0]))}}class N{static addMoneyToPlayer(e,t){e.money+=t,e.capital+=t,l.Coins(),F.refreshPlayerHTML(e)}static removeMoneyFromPlayer(e,t,a){if(N.checkForBankruptcy(e,t)){_.remove(e);const t=`Player ${e.id} is bankrupt!`;return x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,t),e.money}!0===a?(e.money-=t,l.DropCoins(),F.refreshPlayerHTML(e)):(e.money-=t,e.capital-=t,l.DropCoins(),F.refreshPlayerHTML(e))}static payPlayer2Player(e,t,a){const n=N.removeMoneyFromPlayer(e,t);if(n){N.addMoneyToPlayer(a.owner,n),e.money=0,e.capital=0,F.refreshPlayerHTML(e);const t=`Player ${a.owner.id} get rest cash from player ${e.id}`;x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,t)}else{N.addMoneyToPlayer(a.owner,t),F.refreshPlayerHTML(e);const n=`${a.owner.name} get $${t}K from  ${e.name}`;x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,n)}return!!n}static checkForBankruptcy(e,t){return!(e.money>=t&&e.capital>t)}static checkCapital(e,t){return!(e.capital>t&&e.money<t)}static isEnoughInCash(e,t){if(e.money>=t)return!0;const a=`Player ${e.id} doesn't have enough in cash`;return x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,a),!1}static tradeFields(e,t,a){a.owner=e,e.capital+=a.price,t.capital-=a.price,F.refreshPlayerHTML(e),F.refreshPlayerHTML(t),F.playerColorField(e,a),O.setCurrentValue(e,a)}}class R{static move(e,t){const a=e.currentPosition;R.playerChipMove(e,t),l.chipShuffle(),27<=a&&a<=38&&1<=t&&t<=12&&(N.addMoneyToPlayer(e,200),x.run(G.boardFieldsContainer,e,G.cardsData[t],void 0,"have",e.money)),e.currentPosition=t}static playerChipMove(e,t){const a=G.currPlayer,n=document.querySelectorAll(".fieldChip")[a],r=document.querySelector(`#field${t}`),s=1<=t&&t<=12||32<=t&&t<=38?"left":"right",o=1<=t&&t<=19?"top":"bottom",i="left"===s?r.style.left:r.style.right,c="top"===o?r.style.top:r.style.bottom;switch(n.setAttribute("style",`${s}:${i};${o}:${c};`),a){case 0:n.animate([{transform:"translateX(0%)"}],{duration:1e3,fill:"forwards"});break;case 1:"left"===s?n.animate([{transform:"translateX(30%)"}],{duration:1e3,fill:"forwards"}):n.animate([{transform:"translateX(-30%)"}],{duration:1e3,fill:"forwards"});break;case 2:"left"===s?n.animate([{transform:"translateX(60%)"}],{duration:1e3,fill:"forwards"}):n.animate([{transform:"translateX(-60%)"}],{duration:1e3,fill:"forwards"});break;case 3:"left"===s?n.animate([{transform:"translateX(80%)"}],{duration:1e3,fill:"forwards"}):n.animate([{transform:"translateX(-80%)"}],{duration:1e3,fill:"forwards"});break;case 4:"left"===s?n.animate([{transform:"translateX(90%)"}],{duration:1e3,fill:"forwards"}):n.animate([{transform:"translateX(-90%)"}],{duration:1e3,fill:"forwards"});break;case 5:"left"===s?n.animate([{transform:"translateX(100%)"}],{duration:1e3,fill:"forwards"}):n.animate([{transform:"translateX(-100%)"}],{duration:1e3,fill:"forwards"})}}}class W{static route(e,t){switch(t.type){case"common":this.commonRoute(e,t);break;case"trade":this.tradeRoute(e,t)}}static commonRoute(e,t){const a=t.id;let n;switch(!0){case[6,25].includes(a):n=W.MessageDataGetter.forceMajeureMessages(),x.run(G.chatWindowBox,e,t,n);const r=n.sum,s=document.createElement("button");s.innerText=`PAY: ${r}k$`,G.playerInterface.appendChild(s),s.addEventListener("click",(()=>{N.checkCapital(e,r)?(N.removeMoneyFromPlayer(e,r),x.run(G.chatWindowBox,e,t,void 0,"lost",r),j.clearEndTurn(e)):x.run(G.chatWindowBox,e,t,void 0,"sold")})),l.ForceorTax();break;case[17,36].includes(a):x.run(G.chatWindowBox,e,t);const o=Math.floor(6*e.capital/100),i=document.createElement("button");i.innerText=`PAY: ${o}k$`,G.playerInterface.appendChild(i),i.addEventListener("click",(()=>{N.checkCapital(e,o)?(N.removeMoneyFromPlayer(e,o),j.clearEndTurn(e),l.ForceorTax(),x.run(G.chatWindowBox,e,t,void 0,"pay")):x.run(G.chatWindowBox,e,t,void 0,"sold")}));break;case[8,27].includes(a):n=W.MessageDataGetter.chanceMessages(),x.run(G.chatWindowBox,e,t,n);const c=n.sum,d=document.createElement("button");d.innerText=`GET: ${c}k$`,l.ChanceorRelax(),G.playerInterface.appendChild(d),d.addEventListener("click",(()=>{N.addMoneyToPlayer(e,c),x.run(G.chatWindowBox,e,t,void 0,"get",c),j.clearEndTurn(e)}));break;case[13].includes(a):x.run(G.chatWindowBox,e,t),j.clearEndTurn(e),l.PickUp();break;case[1].includes(a):x.run(G.chatWindowBox,e,t),j.clearEndTurn(e);break;case[20].includes(a):x.run(G.chatWindowBox,e,t),j.clearEndTurn(e),l.PickUp();break;case[32].includes(a):x.run(G.chatWindowBox,e,t),e.isInPrison=3,l.ForceorTax(),R.move(e,13),j.clearEndTurn(e),l.PickUp()}}static tradeRoute(e,t){switch(t.owner){case e:x.run(G.chatWindowBox,e,t),j.clearEndTurn(e);break;case null:x.run(G.chatWindowBox,e,t);const a=document.createElement("button"),n=t.price;a.innerText=`Buy ${t.title}`,a.addEventListener("click",(()=>{if(!(e.money>=n))return l.AdminSound(),void x.run(G.chatWindowBox,e,t,void 0,"nobuy");t.owner=e,N.removeMoneyFromPlayer(e,n,!0),O.setCurrentValue(e,t),x.run(G.chatWindowBox,e,t,void 0,"buy"),F.playerColorField(e,t),l.BuyCard(),j.clearEndTurn(e)})),j.clearEndTurn(e),G.playerInterface.appendChild(a);break;default:if(x.run(G.chatWindowBox,e,t),t.lock)return x.run(G.chatWindowBox,e,t),void j.clearEndTurn(e);const r=t.currValue?t.currValue:t.price,s=[7,26].includes(t.id)?r*V.sum:r,o=document.createElement("button");o.innerText=`PAY: ${s}k$`,o.addEventListener("click",(()=>{N.checkCapital(e,s)?(!0===N.payPlayer2Player(e,s,t)?j.addBankruptBtn(e):j.clearEndTurn(e),x.run(G.chatWindowBox,e,t,void 0,"payto")):x.run(G.chatWindowBox,e,t,void 0,"sold")})),G.playerInterface.appendChild(o)}}}W.MessageDataGetter=new class{chanceMessages(){const e=[{text:"Bank pays you dividend of $50!  COLLECT $50.",sum:50},{text:"You set aside time every week to hang out with your elderly neighbor – you’ve heard some amazing stories! COLLECT $100.",sum:100},{text:"Meow! You knit cozy sweaters for the hairless cats at your local animal shelter. COLLECT $20.",sum:20},{text:"Just when you think you can’t go another step, you finish that foot race – and raise money for your local hospital! ADVANCE TO GO. COLLECT $200.",sum:200},{text:"You weed the community garden and discover a new bug! Name it something fun! THEN COLLECT $25.",sum:25},{text:"You volunteer your art skills and paint a mural at the local school! COLLECT $50.",sum:50},{text:"Your cousin forgot their wallet! You happily pay for dinner. PAY $50.",sum:50},{text:"You organize a family reunion! COLLECT $200.",sum:200},{text:"You spend the day playing games with kids at a local children’s hospital. COLLECT $100.",sum:100},{text:"You organize a group to clean up your town’s footpaths. COLLECT $50.",sum:50},{text:"You volunteered at a blood donation. There were free cookies! COLLECT $10.",sum:10},{text:"You help your neighbor bring in her groceries. She makes you lunch to say thanks! COLLECT $20.",sum:20},{text:"You help your neighbors clean up their Gardens after a big storm. COLLECT $200.",sum:200},{text:"You organize a bake sale for your local school. COLLECT $25.",sum:25},{text:"Your building loan matures. Collect $150",sum:150},{text:"Bank error in your favor! Collect $75.",sum:75},{text:"Income Tax refund - collect $20",sum:20},{text:"You have won a prize in a beauty contest",sum:10},{text:"You inherit $100",sum:100},{text:"From sale of stock you get $50",sum:50}];return e[Math.floor(Math.random()*(e.length+1-0))+0]}forceMajeureMessages(){const e=[{text:"Doctor’s fee. Pay $50",sum:50},{text:"You go to the local school’s car wash fundraiser – but you forget to close your windows! PAY $100.",sum:100},{text:"You didn’t shop local! PAY $50.",sum:50},{text:"You help build a new school playground! PAY $100.",sum:100},{text:"You donate your birthday money to a community center! PAY $50.",sum:50},{text:"You buy a few bags of cookies from that school bake sale. Yum! PAY $50.",sum:50},{text:"Your fuzzy friends at the animal shelter will be thankful for your donation. PAY $50.",sum:50},{text:"Pay your insurance premium $50! PAY $50.",sum:50},{text:"Parking fine $15",sum:15},{text:"Speeding fine $15",sum:15},{text:"Life Insurance Matures. Pay $100",sum:100},{text:"Pay Hospital Fees of $100",sum:100},{text:"Pay School Fees of $50",sum:50},{text:"Consultancy Fee. Pay $25",sum:25},{text:"You are assessed for street repairs. Pay $40",sum:40}];return e[Math.floor(Math.random()*(e.length+1-0))+0]}};class z{static lockProperties(e){const t=document.querySelector(".playerMainView"),a=document.querySelector("#pmv");t.removeChild(a),t.insertAdjacentHTML("afterbegin",'\n<div class="mortgage">\n<button id="exitLockBtn">Exit</button>\n</div>');const n=document.querySelector(".mortgage");document.querySelector("#exitLockBtn").addEventListener("click",(()=>{r.forEach((e=>{null==e||e.removeEventListener("click",s)})),n.remove(),t.append(a)}));const r=document.querySelectorAll(".playField"),s=t=>{(t=>{t.stopImmediatePropagation();const a=t.target.closest(".playField"),n=null==a?void 0:a.id;if(n){const t=Number(n.replace(/field/g,"")),r=G.cardsData.find((e=>e.id===t)),s=r.country;if(!s||r.owner!==e)return void x.run(G.boardFieldsContainer,e,r,void 0,"pickshares");if(O.countryFields.get(s).map((e=>G.cardsData.find((t=>t.id===e)))).some((e=>{var t;return null===(t=e.value)||void 0===t?void 0:t.shares.includes(e.currValue)}))&&!y.includes(r.id))return void x.run(G.boardFieldsContainer,e,r,void 0,"pickshares");const o=r.pledge,i=r.redemption,c=null==a?void 0:a.querySelector(".lock"),l=null==a?void 0:a.querySelector(".darker");if(!0===r.lock){if(!N.isEnoughInCash(e,i))return;N.removeMoneyFromPlayer(e,i),r.lock=!1,c.classList.remove("active"),l.classList.remove("active"),x.run(G.boardFieldsContainer,e,r,void 0,"return")}else N.addMoneyToPlayer(e,o),r.lock=!0,c.classList.add("active"),l.classList.add("active"),x.run(G.boardFieldsContainer,e,r,void 0,"pawnlock")}})(t)};r.forEach((e=>{null==e||e.addEventListener("click",s)}))}}class K{static startTrading(e){const t=G.cardsData,a=e.name,n=G.players.filter((e=>!e.isBankrupt)).filter((t=>t!==e)),r=document.querySelector(".playerMainView"),s=document.querySelector("#pmv");r.removeChild(s);const o=document.createElement("div");o.classList.add("trade"),o.innerHTML='\n<span id="tradeClose">X</span>\n<div class="trade__container">\n<p class="trade__title">Current Player: <span id="tradeCP"></span></p>\n<p class="trade__title">Choose player:</p>\n<select id="tradeSelectPlayer"></select>\n<button id="tradeBtn">Trade</button>\n</div>',r.append(o);const i=document.querySelector("#tradeClose");i.addEventListener("click",(()=>{o.remove(),l.AdminSound(),document.querySelector("#pmv")||r.appendChild(s)}));const c=document.querySelector("#tradeCP"),d=document.querySelector("#tradeSelectPlayer");n.forEach((e=>{const t=document.createElement("option");t.value=`${e.id}`,t.innerText=e.name?e.name:`Player ${e.id}`,d.append(t)})),c.innerText=a||`Player ${e.id}`,document.querySelector("#tradeBtn").addEventListener("click",(()=>u()));const u=()=>{const a=Number(d.value),c=n.find((e=>e.id===a));if(!c)return void x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,"trade1",a);const u=G.cardsData.filter((t=>t.owner===e)).map((e=>e.id)),y=G.cardsData.filter((e=>e.owner===c)).map((e=>e.id)),f=document.querySelectorAll(".playField");document.querySelector(".trade__container").innerHTML='\n    <div class="trade__top-player">\n    <p class="trade__title"><span id="tradeCP"></span></p>\n        <input type="range" id="tpRange" value="0" step="1">\n        <div class="range-value">$<output id="tpValue">0</output>K</div>\n        <p class="trade__title">Property:</p>\n        <div id="tpCards"></div>\n    </div>\n    <div class="trade__bottom-player">\n    <p class="trade__title"><span id="tradeBP"></span></p>\n        <input type="range" id="bpRange" value="0" step="1">\n        <div class="range-value">$<output id="bpValue">0</output>K</div>\n        <p class="trade__title">Property:</p>\n        <div id="bpCards"></div>\n    </div>\n    <button id="makeOfferBtn">Make offer!</button>\n';const v=e=>{h(e,u,y,c)};f.forEach((e=>{null==e||e.addEventListener("click",v)})),i.addEventListener("click",(()=>{o.remove(),f.forEach((e=>{null==e||e.removeEventListener("click",v)}))}));const g=document.querySelector("#tpRange"),b=document.querySelector("#bpRange"),w=document.querySelector("#tpValue"),k=document.querySelector("#bpValue");g.max=String(e.money),b.max=String(c.money),g.addEventListener("input",(()=>{w.innerText=g.value})),b.addEventListener("input",(()=>{k.innerText=b.value}));const L=document.querySelector("#tradeCP"),E=document.querySelector("#tradeBP");[e,c].forEach(((e,t)=>{(0===t?L:E).innerText=e.name?e.name:`Player ${e.id}`})),document.querySelector("#makeOfferBtn").addEventListener("click",(()=>$()));const $=()=>{const a=Number(g.value),n=Number(b.value),i=t.filter((e=>m.includes(e.id))),d=t.filter((e=>p.includes(e.id))),u=i.filter((t=>t.owner===e)).length===i.length,h=d.filter((e=>e.owner===c)).length===d.length;switch(!0){case a>e.money||n>c.money:return void x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,"trade2");case!u||!h:return void x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,"trade3");default:r.removeChild(o),r.insertAdjacentHTML("afterbegin",'\n<div class="player-title"><span id="playerName"></span>. Do you accept trade?</div>\n<div class="trade-accept__btns">\n<button id="yesBtn">yes</button>\n<button id="noBtn">no</button>\n</div>'),document.querySelector("#playerName").innerText=`${c.name}`,document.querySelector(".trade-accept__btns").addEventListener("click",(t=>{document.querySelector("#yesBtn"),document.querySelector("#noBtn"),t.target.closest("#yesBtn")?(N.addMoneyToPlayer(e,n),N.removeMoneyFromPlayer(e,a),N.addMoneyToPlayer(c,a),N.removeMoneyFromPlayer(c,n),d.forEach((t=>{N.tradeFields(e,c,t)})),i.forEach((t=>{N.tradeFields(c,e,t)})),o.remove(),l.TradeDoing(),x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,"trade4")):t.target.closest("#noBtn")&&(o.remove(),l.AdminSound(),x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,"trade5")),(t.target.closest("#yesBtn")||t.target.closest("#noBtn"))&&(f.forEach((e=>{null==e||e.removeEventListener("click",v)})),r.innerHTML="",document.querySelector("#pmv")||r.appendChild(s))}))}}},m=[],p=[],h=(a,n,r,s)=>{a.stopImmediatePropagation();const o=document.querySelector("#tpCards"),i=document.querySelector("#bpCards"),c=a.target.closest(".playField"),l=null==c?void 0:c.id;if(l){const a=Number(l.replace(/field/g,"")),c=document.createElement("div");c.classList.add("trade-card"),c.id=`tradeFld${a}`;const d=G.cardsData.find((e=>e.id===a)),u=d.country;if(!u)return void x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,"trade6");if(O.countryFields.get(u).map((e=>t.find((t=>t.id===e)))).some((e=>{var t;return null===(t=e.value)||void 0===t?void 0:t.shares.includes(e.currValue)}))&&!y.includes(d.id))return void x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,"trade7");const h=m.includes(a)?m:!!p.includes(a)&&p;if(h){const e=document.querySelector(`#tradeFld${a}`);return null==e||e.remove(),void h.splice(h.indexOf(a),1)}switch(!0){case n.includes(a):c.style.backgroundImage=`url('${null==d?void 0:d.images}')`,o.appendChild(c),m.push(a),c.addEventListener("click",(()=>{c.remove(),m.splice(m.indexOf(a),1)}));break;case r.includes(a):c.style.backgroundImage=`url('${null==d?void 0:d.images}')`,i.appendChild(c),p.push(a),c.addEventListener("click",(()=>{c.remove(),p.splice(p.indexOf(a),1)}));break;default:let t=`${e.name?e.name:"Player "+e.id}, you need to pick your or ${s.name?s.name+"'s":"Player "+s.id} field`;x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,t)}}}}}class j{static addRollBtn(e){const t=document.createElement("button");t.innerText="roll",t.addEventListener("click",(()=>{return a=this,n=void 0,s=function*(){const a=document.querySelector(".playerMainView"),n=G.playerInterface;a.removeChild(G.playerInterface),G.playerInterface,V.roll(),yield G.timeout(3200),a.appendChild(n);const r=V.sum,s=V.isDouble,o=e.currentPosition+r,i=38===o?38:o%38;if(e.isInPrison){if(s){delete e.isInPrison;const t=`${e.name}: has rolled a double and now broke free`;return x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,t),G.playerInterface.innerHTML="",void j.baseComboBtns(e)}{e.isInPrison-=1;const t=`${e.name}: hasn't rolled a double. Left: ${e.isInPrison}`;return x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,t),void j.clearEndTurn(e)}}R.move(e,i);const c=G.cardsData[i-1];W.route(e,c),t.remove()},new((r=void 0)||(r=Promise))((function(e,t){function o(e){try{c(s.next(e))}catch(e){t(e)}}function i(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var a;t.done?e(t.value):(a=t.value,a instanceof r?a:new r((function(e){e(a)}))).then(o,i)}c((s=s.apply(a,n||[])).next())}));var a,n,r,s})),G.playerInterface.appendChild(t)}static addTradeBtn(e){const t=document.createElement("button");t.innerText="trade",t.addEventListener("click",(()=>{const t=document.querySelector(".trade");t?t.remove():l.OpenTrade(),K.startTrading(e)})),G.playerInterface.appendChild(t)}static addEndTurnBtn(e){const t=document.createElement("button");return t.innerText="end turn",t.addEventListener("click",(()=>j.endTurnHandler(e))),G.playerInterface.appendChild(t),t}static endTurnHandler(e){if(!e.isBankrupt&&V.isDouble){const t=`${e.name} goes again because he threw off the double`;return x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,t),l.againTurn(),void G.newTurn(e)}const t=()=>{G.currPlayer+=1,G.currPlayer===G.players.length&&(G.currPlayer=0);let e=G.players[G.currPlayer];return Object.prototype.hasOwnProperty.call(e,"isBankrupt")?t():e},a=t();l.endTurn(),G.newTurn(a)}static outOfJailBtn(e){const t=0!==e.isInPrison?50:150,a=document.createElement("button");a.addEventListener("click",(()=>{N.removeMoneyFromPlayer(e,t),delete e.isInPrison,j.baseComboBtns(e)})),a.innerText=`Pay: ${t}k$ for out`,G.playerInterface.appendChild(a)}static baseComboBtns(e){G.playerInterface.innerHTML="",j.addRollBtn(e),j.tradeAndLockComboBtns(e),j.addSharesBtns(e)}static addSharesBtns(e){j.addBuySharesBtn(e)}static prisonComboBtns(e){0!==e.isInPrison&&j.addRollBtn(e),j.outOfJailBtn(e),j.tradeAndLockComboBtns(e),j.addSharesBtns(e)}static prisonComboBtnsWORoll(e){j.outOfJailBtn(e),j.tradeAndLockComboBtns(e),j.addSharesBtns(e)}static tradeAndLockComboBtns(e){j.addTradeBtn(e),j.addLockBtn(e)}static clearEndTurn(e){G.playerInterface.innerHTML="",j.tradeAndLockComboBtns(e),j.addSharesBtns(e),j.addEndTurnBtn(e)}static addBankruptBtn(e){G.playerInterface.innerHTML="",j.addEndTurnBtn(e).innerText="BANKRUPT!"}static createConcedeBtn(e){const t=document.createElement("button");return t.addEventListener("click",(()=>{if(confirm("do ypu want Bankrupt")){_.remove(e),G.players[G.currPlayer]===e&&j.endTurnHandler(e);let a=0;G.players.forEach((e=>{e.isBankrupt||(a+=1)})),a>1&&l.Bankrupt(),t.remove()}})),t.classList.add("concede-btn"),t.innerText="concede",t}static addBuySharesBtn(e){const t=document.createElement("button");t.classList.add("buySharesBtn");const a=document.createElement("button");a.classList.add("sellSharesBtn");const n=G.boardFieldsContainer,r=G.cardsData.filter((t=>t.owner===e)).map((e=>e.id));if(![...O.countryFields.values()].some((e=>e.every((e=>r.includes(e))))))return;const s=[...O.countryFields.values()].filter((e=>e.every((e=>r.includes(e))))),o=(a,n)=>{var o,i;a.stopPropagation();const c=a.target.closest(".playField"),l=null==c?void 0:c.id;if(l){const a=Number(l.replace(/field/g,""));if(r.includes(a)){const r=s.filter((e=>e.includes(a)))[0];if(r){if([7,26,3,30,11,22].includes(a)){const t=`${e.name} can't buy shares for this property`;return void x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,t)}const s=G.cardsData.find((e=>e.id===a)),c=s.sharesPrice;if(n&&!N.isEnoughInCash(e,c))return;const l=r.map((e=>G.cardsData.find((t=>t.id===e)))),d=null===(o=s.value)||void 0===o?void 0:o.shares;let u=s.currValue,m=!1;switch(u){case d[0]:if(!0===n){s.currValue=d[1];let t=`${e.name} had bought 2 shares of ${s.name}`;x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,t)}else{s.currValue=null===(i=s.value)||void 0===i?void 0:i.monopoly;let t=`${e.name} had sold 1 shares of ${s.name}`;x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,t)}break;case d[1]:if(!0===n){s.currValue=d[2];let t=`${e.name} had bought 3 shares of ${s.name}`;x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,t)}else{s.currValue=d[0];let t=`${e.name} had sold 2 shares of ${s.name}`;x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,t)}break;case d[2]:if(!0===n){s.currValue=d[3];let t=`${e.name} had bought 4 shares of ${s.name}`;x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,t)}else{s.currValue=d[1];let t=`${e.name} had sold 3 shares of ${s.name}`;x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,t)}break;case d[3]:if(!0===n){s.currValue=d[4];let t=`${e.name} had bought 100% shares of ${s.name}`;x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,t)}else{s.currValue=d[2];let t=`${e.name} had sold 4 shares of ${s.name}`;x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,t)}break;case d[4]:if(!0===n){let t=`${e.name} already have 100% shares of ${s.name}`;x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,t)}else{s.currValue=d[3];let t=`${e.name} had sold 5 shares of ${s.name}`;x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,t)}break;default:if(!0===n){s.currValue=d[0];let t=`${e.name} had bought his 1st share of ${s.name}`;x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,t)}else{m=!0;let t=`${e.name} don't have shares of ${s.name}`;x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,t)}}if(!0===n)u!==s.currValue&&N.removeMoneyFromPlayer(e,c,!0);else if(!m){const t=Math.ceil(c/2);N.addMoneyToPlayer(e,t)}F.changeFieldValue(l),!0===n&&u!==s.currValue&&t.remove()}}}};t.addEventListener("click",(()=>{n.addEventListener("click",(e=>o(e,!0)),{once:!0})})),t.innerText="BUY SHARES!",G.playerInterface.appendChild(t),a.addEventListener("click",(()=>{n.addEventListener("click",(e=>o(e,!1)),{once:!0})})),a.innerText="sell shares",G.playerInterface.appendChild(a)}static addLockBtn(e){const t=document.createElement("button");t.innerText="mortgage/return property",t.addEventListener("click",(()=>z.lockProperties(e))),0!==G.cardsData.filter((t=>t.owner===e)).length&&G.playerInterface.append(t)}}class G{constructor(e){G.players=e,G.playersQnt=e.length}init(){return e=this,t=void 0,n=function*(){G.time=0,G.cardsData=yield Z.getCardsData(),G.playerInterface=document.querySelector("#pmv"),G.boardFieldsContainer=document.querySelector(".boardFieldsContainer"),G.chatWindowBox=document.querySelector(".chat"),G.newTurn(G.players[G.currPlayer]),G.hideExtraChips(G.playersQnt),G.timerStart(),document.querySelectorAll(".player").forEach(((e,t)=>e.append(j.createConcedeBtn(G.players[t])))),F.fullScreen()},new((a=void 0)||(a=Promise))((function(r,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function i(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}c((n=n.apply(e,t||[])).next())}));var e,t,a,n}static timeout(e){return new Promise((t=>setTimeout(t,e)))}static timerStart(){G.time+=1,F.timerHTML(G.time),setTimeout(G.timerStart,1e3)}static newTurn(e){x.run(G.boardFieldsContainer,e,G.cardsData[0],void 0,"turn"),document.querySelectorAll(".player").forEach((t=>{e.id===Number(t.id)?t.classList.add("active-palyer"):t.classList.remove("active-palyer")})),G.playerInterface.innerHTML="",e.isInPrison||0===e.isInPrison?j.prisonComboBtns(e):j.baseComboBtns(e)}static hideExtraChips(e){const t=[...Array(e).keys()].map((e=>e+1));[1,2,3,4,5].filter((e=>!t.includes(e))).forEach((e=>{document.querySelector(`.color_${e}`).style.display="none"}))}}G.currPlayer=0;const X=new class{showInfo(e){var t,a,n;const r=e.target;if(r&&r.classList.contains("i-cross"))return void(null===(t=document.querySelector(`#${M}`))||void 0===t||t.remove());if(document.querySelector(`#${M}`)&&!r.closest(`#${M}`))return void(null===(a=document.querySelector(`#${M}`))||void 0===a||a.remove());const s=r.closest(".playField");let o;if(G&&G.cardsData&&G.cardsData.forEach((e=>{s&&e.id===Number(s.dataset.fieldNumber)&&(o=e)})),o){const e=new P("div",B,M,o).run();r&&s&&(document.querySelector(`#${M}`)&&(null===(n=document.querySelector(`#${M}`))||void 0===n||n.remove()),document.querySelector("main").append(e))}}};var U=function(e,t,a,n){return new(a||(a=Promise))((function(r,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function i(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}c((n=n.apply(e,t||[])).next())}))};class Z{init(){return this.createBoard()}createBoard(){const e=document.createElement("div");e.classList.add("board"),e.innerHTML='<div class="boardBody">\n<div class="boardFieldsContainer"></div>\n<div class="playerMainView"><div id="pmv"></div></div>\n</div>',this.gameBoard=e.querySelector(".boardFieldsContainer"),this.createPlayFields(),this.createChips();const t=e.querySelector(".boardFieldsContainer");return x.run(t),document.addEventListener("click",X.showInfo),e}createPlayFields(){return U(this,void 0,void 0,(function*(){for(let e=1;e<=38;e++){const t=document.createElement("div");switch(t.classList.add("playField"),t.id=`field${e}`,t.dataset.fieldNumber=`${e}`,!0){case 1===e:t.classList.add("corner","start"),t.style.top="0px",t.style.left="0px";break;case 1<=e&&e<=12:t.classList.add("top"),t.style.top="0px",t.style.left=13.55+6.6265*(e-2)+"%",t.innerHTML=d;break;case 13===e:t.classList.add("corner"),t.style.top="0px",t.style.right="0px";break;case 14<=e&&e<=19:t.classList.add("right"),t.style.right="0px",t.style.top=19.8198+9.9099*(e-14)+"%",t.innerHTML=d;break;case 20===e:t.classList.add("corner"),t.style.bottom="0px",t.style.right="0px";break;case 21<=e&&e<=31:t.classList.add("bottom"),t.style.bottom="0px",t.style.right=13.7+6.6265*(e-21)+"%",t.innerHTML=d;break;case 32===e:t.classList.add("corner"),t.style.bottom="0px",t.style.left="0px";break;case 33<=e&&e<=38:t.classList.add("left"),t.style.left="0px",t.style.bottom=20.3+9.9099*(e-33)+"%",t.innerHTML=d}this.gameBoard.append(t)}yield this.drawBoardElements()}))}createChips(){for(let e=1;e<=5;e++){const t=document.createElement("div");switch(t.classList.add("fieldChip",`color_${e}`),e){case 1:t.style.left="2%",t.style.top="2%";break;case 2:t.style.left="7%",t.style.top="4%";break;case 3:t.style.left="5%",t.style.top="7%";break;case 4:t.style.left="8.5%",t.style.top="10%";break;case 5:t.style.left="2.5%",t.style.top="12%"}this.gameBoard.append(t)}}static getCardsData(){return U(this,void 0,void 0,(function*(){const e=yield fetch("../../../assets/cards-data.json");return(yield e.json()).cards}))}drawBoardElements(){var e;return U(this,void 0,void 0,(function*(){this.cardsData=yield Z.getCardsData(),(null===(e=this.gameBoard)||void 0===e?void 0:e.querySelectorAll(".playField")).forEach(((e,t)=>{const a=e.querySelector(".flag"),n=e.querySelector(".logo"),r=e.querySelector(".fieldPrice"),s=this.cardsData[t];switch(s.type){case"trade":a.style.backgroundImage=`url('${s.flag}')`,n.style.backgroundImage=`url('${s.images}')`,r.innerText=`$${s.price}K`;break;case"common":if([1,13,20,32].includes(t+1))break;e.insertAdjacentHTML("beforeend",'<div class="accidential">\n</div>');const o=e.querySelector(".accidential");o&&(o.innerText=s.title)}}))}))}}const J=class extends i{constructor(e){super(e)}createImg(){const e=document.querySelectorAll(".input-img");for(let t=0;t<e.length;++t)e[t].src="../../../assets/img/chips_hall.png";e[0]&&(e[0].classList.remove("blue-chip"),e[0].classList.remove("green-chip"),e[0].classList.remove("yellow-chip"),e[0].classList.remove("pink-chip"),e[0].classList.add("red-chip")),e[1]&&(e[1].classList.remove("red-chip"),e[1].classList.remove("green-chip"),e[1].classList.remove("yellow-chip"),e[1].classList.remove("pink-chip"),e[1].classList.add("blue-chip")),e[2]&&(e[2].classList.remove("red-chip"),e[2].classList.remove("blue-chip"),e[2].classList.remove("yellow-chip"),e[2].classList.remove("pink-chip"),e[2].classList.add("green-chip")),e[3]&&(e[3].classList.remove("red-chip"),e[3].classList.remove("blue-chip"),e[3].classList.remove("green-chip"),e[3].classList.remove("pink-chip"),e[3].classList.add("yellow-chip")),e[4]&&(e[4].classList.remove("red-chip"),e[4].classList.remove("blue-chip"),e[4].classList.remove("green-chip"),e[4].classList.remove("yellow-chip"),e[4].classList.add("pink-chip"))}createInput(){const e=document.createElement("div"),t=document.createElement("div"),a=document.createElement("img"),n=document.createElement("input"),r=document.createElement("div");return e.append(t),t.append(a),e.append(n),e.append(r),n.type="text",n.placeholder="Please, enter your name",n.classList.add("input"),e.classList.add("input-block"),r.classList.add("addInput"),a.classList.add("input-img"),t.classList.add("input-block-img"),a.src="../../../assets/img/chips_hall.png",r.addEventListener("click",(()=>{const t=document.querySelectorAll("input"),a=document.querySelector(".form-add");t.length>2&&(a.classList.remove("no-add"),e.remove(),this.createImg()),l.OutComing()})),e}createArrayName(){const e=[],t=document.querySelectorAll("input");for(let a=0;a<t.length;a++)t[a],e.push(t[a].value);return e}createGamePage(){const e=document.createElement("div");e.classList.add("message");const t=document.createElement("div"),a=document.createElement("h2"),n=document.createElement("button"),r=document.createElement("form");e.append(t),r.append(n),t.append(a),t.classList.add("block-players"),a.classList.add("text-form"),t.append(r),r.classList.add("form");const s=document.createElement("div");s.classList.add("form-add"),s.innerText="+",a.innerText="Please, add player from 2 till 5",s.addEventListener("click",(()=>{const e=document.querySelectorAll("input");if(l.Incoming(),e.length<4){const e=this.createInput();r.append(e),this.createImg(),n.classList.remove("no-add")}else if(e.length<5){const e=this.createInput();r.append(e),s.classList.add("no-add"),this.createImg()}})),r.prepend(s);const o=this.createInput();return r.prepend(o),n.innerText="Start game",n.classList.add("button-start-game"),n.classList.add("no-add"),n.addEventListener("click",(()=>{return e=this,t=void 0,n=function*(){const e=this.createArrayName();if(e.length<2)return void alert("PLease, add new player");const t=document.querySelector("main"),a=(new Z).init();t.innerHTML="",null==t||t.append(a);const n=document.getElementById("game-page"),r=document.createElement("div");n.prepend(r),r.classList.add("players");const s=[{id:1,name:"Player1",money:1500,capital:1500,color:"red",currentPosition:1},{id:2,name:"Player2",money:1500,capital:1500,color:"blue",currentPosition:1},{id:3,name:"Player3",money:1500,capital:1500,color:"green",currentPosition:1},{id:4,name:"Player4",money:1500,capital:1500,color:"yellow",currentPosition:1},{id:5,name:"Player5",money:1500,capital:1500,color:"pink",currentPosition:1}];s.forEach(((t,a)=>{e[a]&&(t.name=e[a])})),s.length=e.length,s.forEach(((e,t)=>{const a=new class{constructor(e){this.id=e.id,this.name=e.name,this.money=e.money,this.capital=e.capital,this.color=e.color}createDiv(){const e=document.createElement("div"),t=document.createElement("div"),a=document.createElement("div"),n=document.createElement("img"),r=document.createElement("div"),s=document.createElement("img"),o=document.createElement("div"),i=document.createElement("div"),c=document.createElement("h1"),l=document.createElement("h3"),d=document.createElement("span"),u=document.createElement("h3"),m=document.createElement("span");return e.append(t),t.append(a),t.append(r),a.append(n),r.append(s),e.append(i),i.append(c),e.append(o),o.append(l),o.append(u),e.classList.add("player"),t.classList.add("picture-block"),i.classList.add("name-block"),c.classList.add("name"),r.classList.add("name-chip-block"),s.classList.add(`${this.color}-chip`),a.classList.add("picture-player-block"),n.classList.add(`${this.color}`),n.classList.add("picture-player"),o.classList.add("description-player"),e.id=this.id.toString(),s.src="../../assets/img/chips_hall.png",n.src="../../assets/img/unknownPlayer.jpg",c.innerText=this.name,d.id=`money-${this.id}`,d.innerText=this.money.toString(),l.innerHTML=l.innerText=`Money: $${d.outerHTML}K`,m.id=`capital-${this.id}`,m.innerHTML=this.capital.toString(),u.innerHTML=u.innerText=`Capital: $${m.outerHTML}K`,e}}(e).createDiv();r.append(a)})),new G(s).init(),l.StartGame()},new((a=void 0)||(a=Promise))((function(r,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function i(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}c((n=n.apply(e,t||[])).next())}));var e,t,a,n})),e}returnHTML(){const e=this.createGamePage();return this.container.append(e),this.container}},Q=class extends i{constructor(e){super(e)}createError(){const e=document.createElement("div");return e.textContent="Error 404! The page was not found.",e.classList.add("message"),e}returnHTML(){return this.container.append(this.createError()),this.container}};class ee{static returnNewPage(e){const t=document.querySelector(".main");t&&t.remove();let a=null;if(a="start-page"===e?new c(e):"game-page"===e?new J(e):new Q("error-page"),a)return a.returnHTML()}knowHashchange(){window.addEventListener("hashchange",(()=>{const e=window.location.hash.slice(1),t=ee.returnNewPage(e);void 0!==t&&document.querySelector("header").after(t),document.querySelector("main").id}))}constructor(){this.header=new s("header",["header"]),this.initPage=new c("start-page"),this.footer=new o("footer",["footer"])}run(){ee.container.prepend(this.header.returnHTML());const e=ee.returnNewPage(ee.startPageID);void 0!==e&&document.querySelector("header").after(e),ee.container.append(this.footer.returnHTML()),this.knowHashchange(),window.addEventListener("load",(()=>window.location.hash="#start-page"))}}ee.container=document.body,ee.startPageID="start-page",(new ee).run()})();